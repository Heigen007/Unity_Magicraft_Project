# üéØ –≠—Ç–∞–ø 4: –í—Ä–∞–≥–∏ –∏ —Å–∏—Å—Ç–µ–º–∞ —É—Ä–æ–Ω–∞ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

## ‚úÖ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:

1. **HealthComponent.cs** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–¥–æ—Ä–æ–≤—å—è (HP, —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è, —Å–æ–±—ã—Ç–∏—è)
2. **EnemyController.cs** - AI –≤—Ä–∞–≥–∞ (–¥–≤–∏–∂–µ–Ω–∏–µ –∫ –∏–≥—Ä–æ–∫—É)
3. **EnemyPool.cs** - –ø—É–ª–∏–Ω–≥ –≤—Ä–∞–≥–æ–≤
4. **EnemySpawner.cs** - —Å–ø–∞–≤–Ω–µ—Ä –≤–æ–ª–Ω–∞–º–∏

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Unity:

### 1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ—Ñ–∞–± –≤—Ä–∞–≥–∞

#### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å GameObject –≤—Ä–∞–≥–∞
1. Hierarchy ‚Üí –ü–ö–ú ‚Üí Create Empty ‚Üí "Enemy_Basic"
2. –î–æ–±–∞–≤—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

**SpriteRenderer:**
- Sprite: –ª—é–±–æ–π (Create ‚Üí Sprites ‚Üí Circle –∏–ª–∏ Square)
- Color: –ö—Ä–∞—Å–Ω—ã–π (255, 0, 0)
- Sorting Layer: Default
- Order in Layer: 5

**Circle Collider 2D:**
- Radius: 0.3
- **Is Trigger: –ù–ï–¢** (–≤—ã–∫–ª—é—á–∏ –≥–∞–ª–æ—á–∫—É)

**Rigidbody 2D:**
- Body Type: **Dynamic**
- Gravity Scale: 0
- Constraints ‚Üí Freeze Rotation Z: ‚úÖ (–ø–æ—Å—Ç–∞–≤—å –≥–∞–ª–æ—á–∫—É)
- **Simulated: ‚úÖ –í–ö–õ–Æ–ß–ï–ù–û**

**HealthComponent:**
- Max Health: 30
- Start Health: 0 (auto = max)
- Health Regen: 0
- Regen Delay: 3
- Invulnerability Duration: 0

**EnemyController:**
- Move Speed: 3
- Stop Distance: 0.5
- Target: –æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º (–Ω–∞–π–¥—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- Sprite Renderer: –ø–µ—Ä–µ—Ç–∞—â–∏ SpriteRenderer

3. **Layer:** Default (–∏–ª–∏ —Å–æ–∑–¥–∞–π –æ—Ç–¥–µ–ª—å–Ω—ã–π "Enemy")
4. **Tag:** –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å "Enemy" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### –®–∞–≥ 2: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –ø—Ä–µ—Ñ–∞–±
1. –ü–µ—Ä–µ—Ç–∞—â–∏ Enemy_Basic –∏–∑ Hierarchy ‚Üí –≤ –ø–∞–ø–∫—É Prefabs
2. –£–¥–∞–ª–∏ Enemy_Basic –∏–∑ —Å—Ü–µ–Ω—ã

---

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å EnemySpawner

#### –°–æ–∑–¥–∞—Ç—å GameObject —Å–ø–∞–≤–Ω–µ—Ä–∞:
1. Hierarchy ‚Üí –ü–ö–ú ‚Üí Create Empty ‚Üí "EnemySpawner"
2. Add Component ‚Üí **EnemySpawner**

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- Spawn Interval: 2 (–≤—Ä–∞–≥–æ–≤ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã)
- Enemies Per Spawn: 1
- Max Enemies: 20
- Min Spawn Distance: 5
- Max Spawn Distance: 10
- Target: –ø–µ—Ä–µ—Ç–∞—â–∏ **Player** –∏–∑ Hierarchy
- Enemy Pool: –æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º (–Ω–∞–π–¥—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

### 3. –°–æ–∑–¥–∞—Ç—å EnemyPool

**–í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- EnemySpawner –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç/—Å–æ–∑–¥–∞—Å—Ç EnemyPool –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–í–∞—Ä–∏–∞–Ω—Ç B: –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å)
1. Hierarchy ‚Üí –ü–ö–ú ‚Üí Create Empty ‚Üí "EnemyPool"
2. Add Component ‚Üí **EnemyPool**
3. Enemy Prefab: –ø–µ—Ä–µ—Ç–∞—â–∏ **Enemy_Basic** –∏–∑ Prefabs
4. Initial Pool Size: 30

---

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Player –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –≤—Ä–∞–≥–∏ –º–æ–≥–ª–∏ –∞—Ç–∞–∫–æ–≤–∞—Ç—å –∏–≥—Ä–æ–∫–∞:

1. –í—ã–±–µ—Ä–∏ **Player** –≤ Hierarchy
2. Add Component ‚Üí **HealthComponent**
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - Max Health: 100
   - Health Regen: 1 (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ 1 HP/—Å–µ–∫)
   - Regen Delay: 5 (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫ –ø–æ—Å–ª–µ —É—Ä–æ–Ω–∞)
   - Invulnerability Duration: 0.5 (–Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç—å –ø–æ—Å–ª–µ —É—Ä–æ–Ω–∞)

---

### 5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–ª–æ–∏ –∫–æ–ª–ª–∏–∑–∏–π (–í–ê–ñ–ù–û!)

–ß—Ç–æ–±—ã —Å–Ω–∞—Ä—è–¥—ã –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ –∏–≥—Ä–æ–∫–∞, –∞ –≤—Ä–∞–≥–∏ –º–æ–≥–ª–∏:

1. Edit ‚Üí Project Settings ‚Üí Physics 2D
2. Layer Collision Matrix:
   - **Default** (Player) ‚úÖ –∫–æ–ª–ª–∏–∑–∏—è —Å **Default** (Enemy)
   - **Default** (Projectile) ‚úÖ –∫–æ–ª–ª–∏–∑–∏—è —Å **Default** (Enemy)
   - **Default** (Projectile) ‚ùå –ù–ï–¢ –∫–æ–ª–ª–∏–∑–∏–∏ —Å **Default** (Player)

**–ò–ª–∏ —Å–æ–∑–¥–∞–π –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–∏:**
1. Edit ‚Üí Project Settings ‚Üí Tags and Layers
2. Layers:
   - Layer 6: Player
   - Layer 7: Enemy
   - Layer 8: Projectile

3. –ù–∞–∑–Ω–∞—á—å —Å–ª–æ–∏:
   - Player GameObject ‚Üí Layer: Player
   - Enemy_Basic –ø—Ä–µ—Ñ–∞–± ‚Üí Layer: Enemy
   - Projectile_Basic –ø—Ä–µ—Ñ–∞–± ‚Üí Layer: Projectile

4. Physics 2D ‚Üí Layer Collision Matrix:
   - Projectile ‚úÖ Enemy
   - Projectile ‚ùå Player
   - Enemy ‚úÖ Player

---

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### 1. –ó–∞–ø—É—Å—Ç–∏ –∏–≥—Ä—É
- –î–æ–ª–∂–Ω—ã –∑–∞—Å–ø–∞–≤–Ω–∏—Ç—å—Å—è –≤—Ä–∞–≥–∏ –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞ (–∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã)

### 2. –ó–∞–∂–º–∏ –õ–ö–ú
- –°—Ç—Ä–µ–ª—è–π –ø–æ –≤—Ä–∞–≥–∞–º

### 3. –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å:
- ‚úÖ –í—Ä–∞–≥–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞ (–Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 5-10 –µ–¥–∏–Ω–∏—Ü)
- ‚úÖ –í—Ä–∞–≥–∏ –¥–≤–∏–≥–∞—é—Ç—Å—è –∫ –∏–≥—Ä–æ–∫—É (—Å–∫–æ—Ä–æ—Å—Ç—å 3)
- ‚úÖ –°–Ω–∞—Ä—è–¥—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤–æ –≤—Ä–∞–≥–æ–≤
- ‚úÖ **–ù–∞–¥ –≤—Ä–∞–≥–∞–º–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è HP** (–∫—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç "30/30")
- ‚úÖ **HP —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è** –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ —Å–Ω–∞—Ä—è–¥–∞
- ‚úÖ –í—Ä–∞–≥ **–∏—Å—á–µ–∑–∞–µ—Ç** –∫–æ–≥–¥–∞ HP = 0
- ‚úÖ –í—Ä–∞–≥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **—Å–µ—Ä—ã–º** –ø–µ—Ä–µ–¥ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ–º

### 4. Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
–í –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞:
```
Mana: X/100
Projectile Pool: X available / 20 total
Enemy Pool: X available / 30 total
Active Enemies: X / 20
```

---

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –±–∞–ª–∞–Ω—Å–∞:

### Enemy_Basic:
- **Max Health: 30** = —É–±–∏–≤–∞–µ—Ç—Å—è –∑–∞ 3 –≤—ã—Å—Ç—Ä–µ–ª–∞ (—É—Ä–æ–Ω —Å–Ω–∞—Ä—è–¥–∞ 10)
- **Move Speed: 3** = –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∏–≥—Ä–æ–∫–∞ (5)

### EnemySpawner:
- **Spawn Interval: 2** = –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- **Max Enemies: 20** = –Ω–µ –±–æ–ª–µ–µ 20 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### Projectile:
- **Damage: 10** (SimpleShooter ‚Üí baseDamage)
- **Speed: 12**
- **Mana Cost: 5**
- **Cooldown: 0.3**

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –í—Ä–∞–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å Console - –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏?
2. EnemySpawner ‚Üí Target –Ω–∞–∑–Ω–∞—á–µ–Ω?
3. Enemy Prefab —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω?

### –°–Ω–∞—Ä—è–¥—ã –Ω–µ –Ω–∞–Ω–æ—Å—è—Ç —É—Ä–æ–Ω:
1. –£ Enemy_Basic –µ—Å—Ç—å **HealthComponent**?
2. Collider **Is Trigger = –ù–ï–¢**?
3. –°–ª–æ–∏ –∫–æ–ª–ª–∏–∑–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã?

### –í—Ä–∞–≥–∏ –Ω–µ –¥–≤–∏–≥–∞—é—Ç—Å—è:
1. Rigidbody **Simulated = –î–ê**?
2. EnemyController ‚Üí Target –Ω–∞–∑–Ω–∞—á–µ–Ω?
3. Move Speed > 0?

### HP –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! OnGUI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞–¥ –≤—Ä–∞–≥–æ–º
- –ï—Å–ª–∏ –Ω–µ –≤–∏–¥–Ω–æ - –≤–æ–∑–º–æ–∂–Ω–æ –≤—Ä–∞–≥ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç–∫—Ä–∞–Ω–∞

---

## üìä –°–ª–µ–¥—É—é—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–≠—Ç–∞–ø 5+):

- –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≤—Ä–∞–≥–æ–≤ (ScriptableObjects)
- –°–∏—Å—Ç–µ–º–∞ –≤–æ–ª–Ω —Å —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ–º
- –ù–∞–≥—Ä–∞–¥—ã –∑–∞ —É–±–∏–π—Å—Ç–≤–æ
- –ê–Ω–∏–º–∞—Ü–∏–∏ –≤—Ä–∞–≥–æ–≤
- –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- UI –∑–¥–æ—Ä–æ–≤—å—è –≤—Ä–∞–≥–æ–≤ (–ø–æ–ª–æ—Å–∫–∏)

**–ì–æ—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å?** üéØüíÄ
